10 REM ************************
11 REM * LISTING 5.1          *
12 REM * ROBOT MAZE LEARNER   * 
13 REM ************************
20 SW=30:SH=14:REM WIDTH & HEIGHT
30 DIM MA(SH,SW),VI(SH,SW),RO(SW*SH,1)
40 CLS0
50 FOR I=2 TO SW:SET(I,0,0):NEXT
60 FOR J=1 TO SH:SET(SW,J,0):NEXT 
70 FOR I=SW-1 TO 0 STEP-1:SET(I,SH,0):NEXT 
80 FOR J=SH TO 0 STEP-1:SET(0,J,0):NEXT
9999 GOTO 9999

90 RANDOMIZE TIMER: FOR I1%=2 TO SWZ-! 
100 FOR J%=2 TO SHZ%-1 
110 IF RND <.25 THEN LOCATE JZ%,1%:PRINT WALLS; 
120 NEXT :NEXT 
130 FOR I%=2 TO 4: FOR JZ=2 TO 4:LOCATE I4%,J4:PRINT" “3:sLOCATE SH/-I14+1,SWA-JA+1sPRINT" ® sNEXT sNEXT 
140 REM Search maze using sensors 
150 LOCATE 24,1: PRINT“Exploring ...."3 
160 I4=1:J“Z=2:WHILE IZ%<>SH/ OR JZ<>SWY-1 
170 GOSUB 390: MEMORY/A=MEMORY%+1 s ROUTEZ(MEMORYZ , 1)=1% s ROUTEXACMEMORYZ , 2)= 
JA:VISITSACIZ, JZ I=VISITSACIZ JZ +1:1F MAZESCI%,JZ)="" THEN: GOSUB 470: RE 
M Remember the route, how often you visit each cell and use sensors if 
you haven’t been there before. 
180 BS=MAZESC(IZ , JZ) 
190 IF VISITSACIZ ,JZ.=1 THEN 230 
200 FOR K/=MEMORY%-1 TO 1 STEP -1: IF ROUTEX(KA,1.=1% AND ROUTEXCKY ,2)0=J 
% THEN MEMORYZHKZ4:K4A=1: REM If you’ve been here before forget the route 
that brought you back here. 
210 NEXT 
220 ON VISITSZCIZ% , JZ) -INTCCVISITSKC IZ, J%-19/4)%4 GOTO 230,240,250 ,260 
230 IF MID$(BS,1,1)="0" THEN: GOSUB 430:I%=I14+1:G0TO 270 
240 IF MID$(BS,2,1)="0" THEN:GOSUB 430: J%=J%+1:G0TO 270 
250 IF MID$(B$,3,1)="0" THEN: GOSUB 430:1%=1%-1:G0TO 270 
260 IF MID$¢(BS,4,1)="0" THEN:GOSUB 430: J4=JZ4-1 
270 WEND 
280 GOSUB 390: MEMORYA=MEMORY%+1 s ROUTEZ(MEMORYZ , 19=1%s ROUTEZACMEMORYZ , 2)=JA 
290 LOCATE 24,1:PRINT"Got there !"; 
300 REM Re-run maze 
310 GOSUB 430 
320 FOR KZ=1 TO MEMORYZ 
330 IZ=ROUTEXC KA , 1) s JZ=ROUTEXC KY , 2) 
340 GOSUB 390 
350 FOR Q=1 TO 25:X=X+1-1:NEXT:REM delay 
360 GOSUB 430 
370 NEXT: GOSUB 390 
380 LOCATE 24,1: PRINT"How’s that !"3;:LOCATE 1,1:END 
390 REM Subroutine to position robot at 1%,J% 
410 LOCATE 1%,J4:PRINT ROBOTS; 
420 RETURN 
430 REM Subroutine to delete robot from I%,J% 
450 LOCATE I%,JA:PRINT" "$5 
460 RETURN 
470 REM Use sensors to build up map at position I1%,JA and place in array MAZES 
480 VERTICALZ=14: HORI ZONTALZ=J% 
900 IF SCREENCVERTICALZ ,HORIZONTALZ-1) = 219 THEN: MAZE$(I%,JZ)="1" ELSE 
MAZES(C1Z% ,JZ)="0" ' 
S10 1F MEMORYA=1 THEN: MAZES$CIZ% ,JZ="1"+MAZESCIZ JAZ) :GOTO 540 
920 IF SCREENCVERTICALZ~-1 ,HORIZONTALZ) = 219 THEN:MAZES(CIZ, JZ)="1" +MAZES 
C1%,JA) sELSE MAZESCIZ , JZ)="0" +MAZESCIZ JZ) : 
340 IF SCREENCVERTICALY ,HORIZONTAL“+1) = 219 THEN MAZES$C IZ ,JZ)="1" +MAZES 
CIZ,JA) sELSE MAZESCIZ% , JZ)="0" +MAZESCIZ , JZ) 
360 IF SCREENCVERTICALA+1 ,HORIZONTALZ) = 219 THEN MAZESCIZ, J/.="1"+MAZES 
(14,JZ) sELSE MAZESCIY , JZI="0" +MAZESCIZ JZ) 
580 RETURN 

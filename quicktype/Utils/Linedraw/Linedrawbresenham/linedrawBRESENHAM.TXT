100 INPUTX1,Y1,X2,Y2:CLS0:GOSUB1500:PRINT@0,;:GOTO100
300 REM old routine
400 DX=X(1)-X(0):DY=Y(1)-Y(0):SX=SGN(DX):SY=SGN(DY)
440 IFDX=0THEN550
450 SL=DY/DX:B=Y(0)-SL*X(0)
460 T1=SQR(SL*SL+1)
470 NX=1/T1*SX
480 FORXT=X(0)TOX(1)STEPNX:X=INT(XT+.5):Y=INT(SL*XT+B+.5):SET(X,Y,C):NEXT
525 RETURN
550 X=X(0):FORY=Y(0)TOY(1)STEPSY:SET(X,Y,C):NEXT:RETURN
1500 REM new draw a line routine
1510 REM inputs X1,Y1,X2,Y2: destroys value of X1,Y1
1520 DX=ABS(X2-X1):SX=-1:IFX1<X2THENSX=1
1530 DY=ABS(Y2-Y1):SY=-1:IFY1<Y2THENSY=1
1540 ER=-DY:IFDX>DYTHENER=DX
1550 ER=INT(ER/2)
1560 SET(X1,Y1,5)
1570 IFX1=X2ANDY1=Y2THENRETURN
1580 E2=ER
1590 IFE2>-DXTHENER=ER-DY:X1=X1+SX
1600 IFE2<DYTHENER=ER+DX:Y1=Y1+SY
1610 GOTO1560

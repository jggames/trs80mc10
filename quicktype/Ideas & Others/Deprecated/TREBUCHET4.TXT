0 DIMX2(40),Y2(40),C2(40),X,Y,A,B,I,J,S,P,F,PI:PI=3.1415:GOTO1000
5 RESET(X,ABS(31-Y)):RETURN
1000 CLS:PRINT"            TREBUCHET"
1010 PRINT " ------------------------------" 
2000 PRINT " A TREBUCHET IS A TYPE OF      "
2001 PRINT " MEDIEVAL WEAPON THAT WAS USED "
2002 PRINT " TO THROW PROJECTILES INTO AN  "
2003 PRINT " ENEMY FORTIFICATION.  IN THIS "
2004 PRINT " GAME YOUR JOB IS TO THROW A   "
2005 PRINT " PROJECTILE FROM THE GREEN BASE"
2006 PRINT " TO HIT THE RED TARGET.  YOU   "
2007 PRINT " CONTROL THE FLIGHT BY         "
2008 PRINT " SELECTING THE INITIAL SPEED   "
2009 PRINT " AND ANGLE.  THE SPEED MUST BE "
2010 PRINT " BETWEEN 1 AND 10.  THE ANGLE  "
2011 PRINT " UP) AND 0 (STRAIGHT TO THE 
2012 PRINT " LEFT)."
2013 PRINT "   PRESS ANY KEY TO CONTINUE";
2015 I$=INKEY$:IFI$=""THEN2015
2016 CLS0
2020 REM PICK TWO RANDOM ELEVATIONS FOR THE GROUND
2030 A=RND(25):IFINT(A/2)-(A/2)=0THEN2030
2040 B=RND(25):IFINT(B/2)-(B/2)=0THEN2040
2050 REM DRAW THE TERRAIN
2060 FORI=0TO24 
2065 FORJ=0TO31
2070 ON1-(J<=A)GOTO2071,2075
2071 SET(I,ABS(31-J),6)
2075 NEXT:NEXT
2090 FORI=25TO49 
2095 FORJ=0TO31
2100 ON1-(J<=B)GOTO2101,2105
2101 SET(I,ABS(31-J),6)
2105 NEXT:NEXT
2120 IF A>B THEN S=-1:GOTO2130
2121 S=1
2130 FOR I=A TO B STEP S
2140 RESET(25,ABS(31-I))
2150 NEXT I
2160 REM SET(THE BASE
2170 SET(10, ABS(31-A),1)
2180 REM SET(THE TARGET
2190 SET(39,ABS(31-B),4)
2200 SET(40,ABS(31-B),4)
2210 SET(41,ABS(31-B),4)
2220 REM DRAW THE CASTLE
2230 FOR I=B+1 TO B + 3
2240 RESET(39,ABS(31-I))
2250 RESET(40,ABS(31-I))
2260 RESET(41,ABS(31-I))
2270 RESET(38,ABS(31-(I+2)))
2280 RESET(42,ABS(31-(I+1)))
2290 RESET(40,ABS(31-(I+3)))
2300 NEXT
3000 REM STARTING VALUES FOR THE PROJECTILE
3010 X=10
3020 Y=A+1
3030 REM ASK THE USER FOR THE PROJECTILE'S INITIAL SPEED AND DIRECTION
3040 PRINT@(32*0)+26,"SPEED ";:PRINT@(32*1)+26,"(1-10)";:PRINT@(32*2)+26,"";:INPUT P
3050 IFP>=1ANDP<=10THEN3080
3060 SOUND1,1
3070 GOTO3040
3080 PRINT@(32*4)+26,"ANGLE ";:PRINT@(32*5)+26,"(0-90)";:PRINT@(32*6)+26,"";:INPUT F
3090 IF F>=0 AND F<=90 THEN GOTO 3130
3100 SOUND 1,1
3120 GOTO 3080
3130 REM TRANSFORM FROM SPEED AND ANGLE TO VELOCITY IN THE X AND Y DIRECTIONS
3140 REM U IS THE X VELOCITY
3150 U=P/5*COS(F/180*PI)
3160 REM V IS THE Y VELOCITY
3170 V=P/5*SIN(F/180*PI)
3172 REM INITIALIZE Z -- THE BACKGROUND COLOR
3175 Z=6
3180 REM REMOVE THE OLD POINT BY PAINTING IT THE SAME COLOR AS THE BACKGROUND
3190 ON1-(Y<32)GOTO3210:SET(X,ABS(31-Y),Z):ON1-(Z>0)GOSUB5
3210 X=X+U:Y=Y+V
3240 IF(X<25ANDY<A)ORX>50THEN4000
3260 IFX>25ANDY<BTHEN3500
3275 ON1-(Y<32)GOTO3280:Z=POINT(X,ABS(31-Y))
3280 ON1-(Y<32)GOTO3310:RESET(X,ABS(31-Y))
3310 V=V-0.02:GOTO3190
3500 REM CHECK IF THE PROJECTILE IS CLOSE ENOUGH TO THE TARGET
3510 IF ABS(X-40)>2 THEN 4000
3520 PRINT@(32*8)+26,"HIT!  ";
3530 REM DEFINE 40 FLAMES BY THE ARRAYS X2, Y2, AND C2
3570 FORI=1TO40:X2(I)=RND(5)+37:Y2(I)=RND(5)+B:C2(I)=8:NEXT
3620 FORJ=1TO5:FORI=1TO40:ON1-(Y2(I)<B+3)GOTO3641:SET(X2(I),ABS(31-Y2(I)),6):RESET(X2(I),ABS(31-Y2(I))):GOTO3650
3641 SET(X2(I),ABS(31-Y2(I)),6) 
3650 Y2(I)=Y2(I)+1
3660 SET(X2(I),ABS(31-Y2(I)),C2(I))
3670 IFRND(0)>0.8THENC2(I)=4
3680 IFRND(0)>0.8THENC2(I)=8
3690 IFRND(0)>0.8THENC2(I)=2
3700 IFRND(0)>0.3ANDY2(I)<B+9THEN3750
3710 ON1-(Y2(I)<B+3)GOTO3711:SET(X2(I),ABS(31-Y2(I)),6):RESET(X2(I),ABS(31-Y2(I))):GOTO3720
3711 SET(X2(I),ABS(31-Y2(I)),6) 
3720 X2(I)=RND(5)+37:Y2(I)=B:C2(I)=8
3750 NEXT:NEXT
3780 FORI=1TO40
3790 IFY2(I)<B+3THENSET(X2(I),ABS(31-Y2(I)),6):RESET(X2(I),ABS(31-Y2(I))):GOTO3800
3791 SET(X2(I),ABS(31-Y2(I)),6)
3800 NEXT
3810 END
4000 PRINT@(32*8)+26,"MISS! ";
4010 GOTO3000
